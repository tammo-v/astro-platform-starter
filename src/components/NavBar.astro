---
---
<nav class="w-full isolate z-[9999] relative bg-white text-sm tracking-wide text-gray-800">
  <div class="max-w-6xl mx-auto py-4 px-6 sm:px-0 relative">
    <div class="flex items-center justify-between">
      <!-- Logo -->
      <a href="/what-is-symbolic-computing"
         class="text-xl sm:text-lg font-semibold sm:font-medium tracking-tight text-[var(--aubergine)] no-underline hover:opacity-80">
        Symbolic Computing
      </a>

      <!-- Desktop nav (manual left offset on first item) -->
      <ul class="hidden sm:flex items-center gap-x-6 nav-align">
        <li class="relative ml-[84px]">
          <button class="nav-toggle font-semibold text-gray-700 hover:text-[var(--aubergine)]" data-menu="foundation">Foundation</button>
          <div id="subnav-foundation" class="absolute top-full left-0 hidden flex flex-row gap-x-6 py-4 px-6 z-50 whitespace-nowrap">
            <a href="/manifesto" class="text-gray-700 font-medium hover:text-[var(--aubergine)] no-underline">The Manifesto</a>
            <a href="/what-is-symbolic-computing" class="text-gray-700 font-medium hover:text-[var(--aubergine)] no-underline">What Is Symbolic Computing?</a>
            <a href="/introducing-mar" class="text-gray-700 font-medium hover:text-[var(--aubergine)] no-underline">Introducing MAR</a>
          </div>
        </li>
        <li class="relative">
          <button class="nav-toggle font-semibold text-gray-700 hover:text-[var(--aubergine)]" data-menu="architecture">MAR Architecture</button>
          <div id="subnav-architecture" class="absolute top-full left-0 hidden flex flex-row gap-x-6 py-4 px-6 z-50 whitespace-nowrap">
            <a href="/asn" class="text-gray-700 font-medium hover:text-[var(--aubergine)] no-underline">ASN</a>
            <a href="/adm" class="text-gray-700 font-medium hover:text-[var(--aubergine)] no-underline">ADM</a>
            <a href="/software-layer" class="text-gray-700 font-medium hover:text-[var(--aubergine)] no-underline">Software Layer</a>
            <a href="/hardware-layer" class="text-gray-700 font-medium hover:text-[var(--aubergine)] no-underline">Hardware Layer</a>
            <a href="/sems" class="text-gray-700 font-medium hover:text-[var(--aubergine)] no-underline">SEMS</a>
          </div>
        </li>
        <li><a href="/articles" class="font-semibold text-gray-700 no-underline hover:underline hover:text-[var(--aubergine)]">Articles</a></li>
        <li><a href="/patents" class="font-semibold text-gray-700 no-underline hover:underline hover:text-[var(--aubergine)]">Patents</a></li>
        <li><a href="/licensing" class="font-semibold text-gray-700 no-underline hover:underline hover:text-[var(--aubergine)]">Licensing</a></li>
        <li><a href="/contact" class="font-semibold text-gray-700 no-underline hover:underline hover:text-[var(--aubergine)]">Contact</a></li>
      </ul>
    </div>

    <!-- Hamburger toggle (mobile only) -->
    <button id="mobile-toggle" class="absolute right-6 top-4 sm:hidden text-gray-800 focus:outline-none">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
      </svg>
    </button>
  </div>

  <!-- Mobile Menu -->
  <div id="mobile-menu" class="sm:hidden hidden flex-col px-4 pt-2 pb-4 space-y-3">
    <!-- Foundation -->
    <div>
      <button class="text-left text-gray-700 font-semibold mb-1" data-toggle="mobile-foundation">Foundation</button>
      <div id="mobile-foundation" class="hidden pl-4 pt-1 space-y-1">
        <a href="/manifesto" class="block text-gray-700 font-medium no-underline">The Manifesto</a>
        <a href="/what-is-symbolic-computing" class="block text-gray-700 font-medium no-underline">What Is Symbolic Computing?</a>
        <a href="/introducing-mar" class="block text-gray-700 font-medium no-underline">Introducing MAR</a>
      </div>
    </div>

    <!-- MAR Architecture -->
    <div>
      <button class="text-left text-gray-700 font-semibold mb-1" data-toggle="mobile-architecture">MAR Architecture</button>
      <div id="mobile-architecture" class="hidden pl-4 pt-1 space-y-1">
        <a href="/asn" class="block text-gray-700 font-medium no-underline">ASN</a>
        <a href="/adm" class="block text-gray-700 font-medium no-underline">ADM</a>
        <a href="/software-layer" class="block text-gray-700 font-medium no-underline">Software Layer</a>
        <a href="/hardware-layer" class="block text-gray-700 font-medium no-underline">Hardware Layer</a>
        <a href="/sems" class="block text-gray-700 font-medium no-underline">SEMS</a>
      </div>
    </div>

    <!-- Other pages -->
    <a href="/articles" class="block text-gray-700 font-medium no-underline">Articles</a>
    <a href="/patents" class="block text-gray-700 font-medium no-underline">Patents</a>
    <a href="/licensing" class="block text-gray-700 font-medium no-underline">Licensing</a>
    <a href="/contact" class="block text-gray-700 font-medium no-underline">Contact</a>
  </div>
</nav>

<script type="module" client:load>
  const toggleButtons = document.querySelectorAll('.nav-toggle');
  const subnavs = {
    foundation: document.getElementById('subnav-foundation'),
    architecture: document.getElementById('subnav-architecture')
  };

  toggleButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      const target = btn.dataset.menu;
      Object.entries(subnavs).forEach(([key, el]) => {
        const isActive = key === target && el.classList.contains('hidden');
        el.classList.toggle('hidden', !isActive);
        el.classList.toggle('flex', isActive);
      });
    });
  });

  const mobileToggle = document.getElementById('mobile-toggle');
  const mobileMenu = document.getElementById('mobile-menu');
  mobileToggle?.addEventListener('click', () => {
    mobileMenu.classList.toggle('hidden');
  });

  document.querySelectorAll('[data-toggle]').forEach(button => {
    const targetId = button.getAttribute('data-toggle');
    const target = document.getElementById(targetId);
    button.addEventListener('click', () => {
      target.classList.toggle('hidden');
    });
  });
</script>
